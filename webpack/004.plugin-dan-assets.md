---
sidebar_position: 5
---

# Plugins dan Manajemen Aset

Jika _Loaders_ bertugas untuk mengubah per-file, **Plugins** bertugas untuk melakukan aksi yang lebih luas, seperti optimasi _bundle_, manajemen aset, dan lain-lain.

## HtmlWebpackPlugin

Ingat di `template.html` kita, tag `<script>`-nya masih kosong? `HtmlWebpackPlugin` akan menyelesaikan masalah ini. Plugin ini akan secara otomatis membuat file HTML baru di folder `dist` dan menyuntikkan _bundle_ JavaScript kita ke dalamnya.

**Langkah 1: Install Plugin**

```bash
npm install --save-dev html-webpack-plugin
```

**Langkah 2: Konfigurasi Webpack**

```javascript title="webpack.config.js"
// highlight-next-line
const HtmlWebpackPlugin = require("html-webpack-plugin");
const path = require("path");

module.exports = {
  // ... entry, output, module ...
  //   highlight-start
  plugins: [
    new HtmlWebpackPlugin({
      template: "./src/template.html", // Gunakan file ini sebagai template
      filename: "index.html", // Nama file outputnya
    }),
  ],
  //   highlight-end
};
```

Sekarang, setelah menjalankan `npm run build`, folder `dist` akan berisi `index.html` yang sudah lengkap dengan tag `<script src="bundle.js"></script>`.

## Caching dengan `[contenthash]`

Browser memiliki mekanisme _caching_ yang kuat. Jika nama file tidak berubah, browser akan menggunakan versi file yang ada di _cache_-nya, bukan mengunduh yang baru. Ini menjadi masalah saat kita meng-update kode tapi nama file _bundle_ kita tetap sama (`bundle.js`).

Solusinya adalah dengan memberikan nama file yang unik setiap kali ada perubahan pada isinya. Webpack menyediakan _placeholder_ bernama `[contenthash]`.

Ubah konfigurasi `output` di `webpack.config.js`:

```javascript title="webpack.config.js" {3}
output: {
  path: path.resolve(__dirname, 'output'),
  filename: 'bundle.[contenthash].js', // Tambahkan [contenthash]
},
```

Setiap kali Anda build, nama filenya akan menjadi seperti `bundle.a48614b6b46c13b8f8d1.js`. Karena `HtmlWebpackPlugin` sudah kita pasang, tag `<script>` di HTML akan otomatis diperbarui sesuai nama file yang baru.

## Membersihkan Folder `dist`

Setiap kali kita build dengan `[contenthash]`, file lama tidak terhapus, membuat folder `dist` menjadi penuh dengan file-file usang. Webpack 5 menyediakan solusi mudah untuk ini.

Tambahkan `clean: true` pada konfigurasi `output`:

```javascript title="webpack.config.js" {4}
output: {
  path: path.resolve(__dirname, 'output'),
  filename: 'bundle.[contenthash].js',
  clean: true, // Tambahkan ini
},
```

Sekarang, sebelum setiap build, Webpack akan membersihkan folder `output` terlebih dahulu.

## Manajemen Aset (Gambar)

Dengan Webpack 5, mengelola aset seperti gambar menjadi sangat mudah berkat _Asset Modules_.

**Langkah 1: Konfigurasi Webpack**

Tambahkan aturan baru untuk file gambar.

```javascript title="webpack.config.js"
module: {
  rules: [
    // ... aturan lain
    {
      test: /\.(png|svg|jpg|jpeg|gif)$/i,
      type: 'asset/resource',
    },
  ],
},
```

`type: 'asset/resource'` akan membuat Webpack memindahkan file gambar ke folder output dan memberikan URL-nya untuk kita gunakan.

**Langkah 2: Menggunakan Gambar di HTML**

Agar Webpack bisa memproses tag `<img>` di dalam `template.html` kita, kita perlu `html-loader`.

```bash
npm install --save-dev html-loader
```

Tambahkan aturannya di `webpack.config.js`:

```javascript title="webpack.config.js"
module: {
  rules: [
    // ... aturan lain
    {
      test: /\.html$/i,
      loader: 'html-loader',
    },
  ],
},
```

Sekarang Anda bisa menambahkan gambar di `src/template.html` dan Webpack akan mengurusnya saat proses build.
