---
sidebar_position: 9
---

# Deployment dengan Git dan GitHub Pages

Setelah membangun dan menyesuaikan situs Anda, langkah terakhir adalah mempublikasikannya agar dapat diakses oleh semua orang di internet. Cara yang paling umum dan gratis untuk proyek sumber terbuka adalah menggunakan **GitHub Pages**.

Kita akan menggunakan **Git** untuk manajemen versi dan **GitHub Actions** untuk otomatisasi proses _deployment_ (Continuous Deployment).

---

## Inisialisasi Git

Jika Anda belum melakukannya, inisialisasi Git di dalam direktori proyek Anda.

1.  **Inisialisasi Repositori:**

    ```bash
    git init
    ```

2.  **Tambahkan Semua File:** Docusaurus sudah menyediakan file `.gitignore` yang baik, jadi aman untuk menambahkan semua file.

    ```bash
    git add .
    ```

3.  **Buat Komitmen Pertama:**
    ```bash
    git commit -m "Initial commit: My Docusaurus site"
    ```

## Menyiapkan Repositori GitHub

1.  **Buat Repositori Baru:** Buka [GitHub](https://github.com) dan buat repositori baru. Beri nama (misalnya, `my-docusaurus-site`). **Jangan** inisialisasi dengan `README`, `.gitignore`, atau `license` karena kita sudah memilikinya secara lokal.

2.  **Hubungkan Repositori Lokal ke Remote:** Salin perintah yang disediakan oleh GitHub untuk menghubungkan repositori lokal Anda. Perintahnya akan terlihat seperti ini:

    ```bash
    git remote add origin https://github.com/NAMA_ANDA/NAMA_REPO.git
    git branch -M main
    git push -u origin main
    ```

    Setelah menjalankan perintah ini, kode Anda sekarang sudah ada di GitHub.

## Konfigurasi `docusaurus.config.js` untuk Deployment

Buka `docusaurus.config.js` dan perbarui beberapa field penting agar sesuai dengan detail GitHub Pages Anda.

```javascript title="docusaurus.config.js"
// kode lain...
const config = {
  title: "Situs Saya",
  tagline: "Belajar Docusaurus",

  // highlight-start
  url: "https://NAMA_ANDA.github.io", // Ganti NAMA_ANDA
  baseUrl: "/NAMA_REPO/", // Ganti NAMA_REPO

  organizationName: "NAMA_ANDA", // Nama pengguna GitHub Anda
  projectName: "NAMA_REPO", // Nama repositori GitHub Anda
  deploymentBranch: "gh-pages", // Branch tempat situs statis akan di-deploy
  // highlight-end

  // ... sisa konfigurasi
};
```

- `url`: URL utama GitHub Pages Anda.
- `baseUrl`: Nama repositori Anda, diawali dan diakhiri dengan `/`.
- `organizationName`: Nama pengguna atau organisasi GitHub Anda.
- `projectName`: Nama repositori proyek ini.

## Membuat Alur Kerja (Workflow) GitHub Actions

GitHub Actions akan secara otomatis membangun (_build_) dan men-_deploy_ situs Anda setiap kali Anda melakukan _push_ ke _branch_ `main`.

1.  **Buat Folder:** Di dalam direktori proyek Anda, buat struktur folder berikut:

    ```bash
    mkdir -p .github/workflows
    ```

2.  **Buat File Workflow:** Di dalam folder `.github/workflows/`, buat file baru bernama `deploy.yml`.

3.  **Isi File `deploy.yml`:** Salin dan tempelkan konten berikut ke dalam `deploy.yml`.

    ```yaml title=".github/workflows/deploy.yml"
    name: Deploy Docusaurus site to GitHub Pages

    on:
      push:
        branches: [main] # Hanya berjalan saat ada push ke branch main

    # Izin untuk workflow agar bisa menulis ke GitHub Pages
    permissions:
      contents: read
      pages: write
      id-token: write

    # Hanya izinkan satu deployment berjalan pada satu waktu
    concurrency:
      group: "pages"
      cancel-in-progress: true

    jobs:
      deploy:
        environment:
          name: github-pages
          url: ${{ steps.deployment.outputs.page_url }}
        runs-on: ubuntu-latest
        steps:
          - name: Checkout
            uses: actions/checkout@v3
          - name: Set up Node.js
            uses: actions/setup-node@v3
            with:
              node-version: 18
              cache: "npm" # atau 'yarn' jika Anda menggunakan yarn
          - name: Install dependencies
            run: npm ci # atau 'yarn install --frozen-lockfile'
          - name: Build
            run: npm run build
          - name: Setup Pages
            uses: actions/configure-pages@v3
          - name: Upload artifact
            uses: actions/upload-pages-artifact@v1
            with:
              path: ./build
          - name: Deploy to GitHub Pages
            id: deployment
            uses: actions/deploy-pages@v1
    ```

    :::warning PENTING

    - Pastikan `branches: [main]` sesuai dengan nama _branch_ utama Anda (`main` atau `master`).
    - Jika Anda menggunakan `yarn`, ganti `cache: 'npm'` menjadi `cache: 'yarn'` dan `run: npm ci` menjadi `run: yarn install --frozen-lockfile`.
      :::

## Aktifkan GitHub Pages dan Deploy

1.  **Komit dan Push Workflow:** Simpan semua perubahan, lalu komit dan _push_ ke GitHub.

    ```bash
    git add .
    git commit -m "Add deployment workflow for GitHub Pages"
    git push
    ```

2.  **Atur Sumber Deployment:**

    - Di repositori GitHub Anda, pergi ke **Settings > Pages**.
    - Di bawah "Build and deployment", ubah **Source** menjadi **GitHub Actions**.

3.  **Lihat Proses Deployment:**

    - _Push_ yang baru saja Anda lakukan akan secara otomatis memicu _workflow_.
    - Buka tab **Actions** di repositori GitHub Anda. Anda akan melihat _workflow_ sedang berjalan.
    - Tunggu hingga prosesnya selesai (sekitar 1-2 menit). Jika berhasil, Anda akan melihat tanda centang hijau.

4.  **Kunjungi Situs Anda!**
    Setelah _workflow_ selesai, situs Anda akan tersedia di URL yang telah Anda konfigurasikan, yaitu `https://NAMA_ANDA.github.io/NAMA_REPO/`.

Selamat! Anda telah berhasil membangun dan mempublikasikan situs Docusaurus Anda secara otomatis. Setiap kali Anda melakukan `git push` ke _branch_ `main`, situs Anda akan diperbarui secara otomatis.
