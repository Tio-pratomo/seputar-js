---
sidebar_position: 5
---

# Menggunakan Environment Variables di Vite

Variabel lingkungan adalah fitur penting untuk mengatur konfigurasi aplikasi berdasarkan lingkungan (pengembangan, staging, atau produksi).

## Konsep Variabel Lingkungan

Dalam pengembangan aplikasi, kita sering membutuhkan nilai konfigurasi yang berbeda tergantung pada lingkungan. Misalnya, URL API untuk pengembangan mungkin berbeda dengan produksi.

**Analogi:**
Bayangkan resep kue yang sama, tetapi bahan-bahannya bisa berbeda tergantung apakah Anda membuat untuk konsumsi pribadi (pengembangan) atau untuk dijual (produksi). Variabel lingkungan seperti daftar bahan yang dapat diubah tanpa mengubah resep utama (kode aplikasi).

## Cara Vite Mengelola Variabel Lingkungan

Vite menggunakan `dotenv` untuk memuat variabel lingkungan dari file-file tertentu di root proyek. Variabel-variabel ini kemudian diekspos ke kode sumber aplikasi.

File yang dimuat secara default:

- `.env` - Variabel lingkungan umum
- `.env.local` - Variabel lokal (tidak di-commit ke version control)
- `.env.[mode]` - File spesifik mode (contoh: `.env.development`, `.env.production`)
- `.env.[mode].local` - File spesifik mode dan lokal

**Penting:** Variabel lingkungan hanya tersedia di kode jika diawali dengan `VITE_`. Ini untuk mencegah kebocoran variabel sensitif.

## Mengakses Variabel Lingkungan

Variabel lingkungan yang dimuat diekspos pada objek `import.meta.env`.

**Contoh Variabel Bawaan:**

- `import.meta.env.MODE` - Mode aplikasi (`development` atau `production`)
- `import.meta.env.BASE_URL` - Base URL aplikasi
- `import.meta.env.PROD` - Boolean, true jika production
- `import.meta.env.DEV` - Boolean, true jika development

### Contoh Penggunaan

```javascript
// src/App.jsx
import { useState } from "react";

function App() {
  const [count, setCount] = useState(0);

  // Menampilkan variabel lingkungan di console
  console.log("Current mode:", import.meta.env.MODE);
  console.log("Base URL:", import.meta.env.BASE_URL);
  console.log("Production build:", import.meta.env.PROD);
  console.log("Development build:", import.meta.env.DEV);

  return (
    <div>
      <h1>Vite + React</h1>
      <p>
        You are currently in: <strong>{import.meta.env.MODE} mode</strong>
      </p>
      {/* ... */}
    </div>
  );
}

export default App;
```

## Membuat Variabel Lingkungan Kustom

Untuk membuat variabel kustom, buat file `.env` di root proyek dan tambahkan variabel dengan awalan `VITE_`.

**Contoh file `.env`:**

```env
# .env
VITE_API_KEY=ini_kunci_api_rahasia_saya_dev
VITE_APP_NAME=Aplikasi Vite Saya (Dev)
```

**Akses di kode:**

```javascript
console.log("VITE_API_KEY:", import.meta.env.VITE_API_KEY);
console.log("VITE_APP_NAME:", import.meta.env.VITE_APP_NAME);
```

## Variabel Lingkungan Spesifik Mode

Anda dapat membuat variabel yang hanya aktif pada mode tertentu dengan membuat file `.env.[mode]`.

**Contoh file `.env.production`:**

```env
# .env.production
VITE_API_KEY=ini_kunci_api_rahasia_saya_prod
VITE_APP_NAME=Aplikasi Vite Saya (Prod)
```

Saat menjalankan `npm run dev`, Vite akan memuat variabel dari `.env`. Saat `npm run build`, Vite akan memuat variabel dari `.env.production`.

## Tantangan: Menambahkan Variabel Lingkungan VITE_APP_VERSION

Mari tambahkan variabel untuk versi aplikasi.

**Langkah-langkah:**

1. **Tambahkan di `.env`:**

   ```env
   VITE_APP_VERSION=1.0.0-beta
   ```

2. **Tambahkan di `.env.production`:**

   ```env
   VITE_APP_VERSION=1.0.0
   ```

3. **Tampilkan di komponen Footer:**

   ```javascript
   // src/components/Footer.jsx
   export default function Footer() {
     const appVersion = import.meta.env.VITE_APP_VERSION;

     return (
       <footer>
         <p>Copyright 2025. All rights reserved.</p>
         {appVersion && <p>Version: {appVersion}</p>}
       </footer>
     );
   }
   ```

**Pengujian:**

- Jalankan `npm run dev` -> Versi akan menampilkan "1.0.0-beta"
- Jalankan `npm run build` -> Versi akan menampilkan "1.0.0"

## Ringkasan

Dalam sesi ini, Anda telah mempelajari:

- Cara Vite memuat variabel lingkungan dari file `.env`
- Pentingnya awalan `VITE_` untuk variabel yang diekspos ke kode
- Cara mengakses variabel melalui `import.meta.env`
- Cara membuat variabel lingkungan spesifik mode

Dengan memahami variabel lingkungan, Anda dapat mengelola konfigurasi aplikasi dengan lebih fleksibel across berbagai lingkungan.
