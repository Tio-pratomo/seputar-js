---
sidebar_position: 10
---

# Kompatibilitas Browser Lama (Target Browser)

Dalam pengembangan web, memastikan aplikasi berfungsi dengan baik di berbagai browser, termasuk versi lama, adalah hal yang krusial. Bug visual atau fungsional dapat muncul di browser yang tidak ter-update.

## Analogi Kompatibilitas Browser

Bayangkan berbicara dalam bahasa Inggris:

- **Browser modern** = Mengerti kosakata modern
- **Browser lama** = Hanya mengerti versi lama, perlu "diterjemahkan"

Browser lama mungkin tidak memahami fitur JavaScript atau CSS modern. Proses "penerjemahan" ini disebut **transpilasi** atau **polyfilling**.

## Cara Vite Menangani Kompatibilitas Browser

Secara default, Vite menargetkan browser modern yang mendukung:

- ES Modules native (`import`, `export`)
- ESM dynamic import (`import()`)
- `import.meta`

Ini mencakup browser modern (Chrome, Firefox, Edge, Safari terbaru), tetapi browser lama mungkin tidak mendukung fitur-fitur ini.

## Menargetkan Browser Lama dengan @vitejs/plugin-legacy

Plugin `@vitejs/plugin-legacy` menyediakan kompatibilitas untuk browser lama dengan:

1. **Transpilasi JavaScript** - Mengkompilasi kode modern ke format lama menggunakan Babel
2. **Polyfilling** - Menyertakan kode untuk fitur modern yang tidak ada di browser lama
3. **Dua Bundle** - Menghasilkan dua set bundle:
   - Bundle modern (lebih kecil dan cepat)
   - Bundle legacy (lebih besar dengan transpilasi dan polyfills)

## Langkah-langkah Menerapkan Kompatibilitas Browser Lama

### Langkah 1: Instal Plugin Legacy

```bash
npm install -D @vitejs/plugin-legacy
```

### Langkah 2: Konfigurasi di `vite.config.ts`

```typescript
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import legacy from "@vitejs/plugin-legacy";

export default defineConfig({
  plugins: [
    react(),
    legacy({
      targets: ["defaults", "not IE 11"],
      // Opsi lainnya: https://github.com/vitejs/vite/tree/main/packages/plugin-legacy#options
    }),
  ],
  server: {
    port: 3000,
  },
  build: {
    outDir: "dist",
    rollupOptions: {
      input: {
        main: resolve(__dirname, "index.html"),
        about: resolve(__dirname, "about.html"),
        contact: resolve(__dirname, "contact.html"),
      },
    },
  },
  resolve: {
    alias: {
      "@": path.resolve(__dirname, "./src"),
    },
  },
});
```

**Penjelasan `targets`:**

- `'defaults'` = Browser default yang masih menerima update reguler
- `'not IE 11'` = Mengecualikan Internet Explorer 11
- Opsi lain berdasarkan [browserslist](https://browsersl.ist/):
  - `'last 2 versions'` = 2 versi terakhir setiap browser
  - `'> 1%'` = Browser dengan usage > 1% global
  - `'Firefox ESR'` = Firefox Extended Support Release

### Langkah 3: Build Produksi

```bash
npm run build
```

Setelah build, periksa direktori `dist/`. Anda akan melihat dua set file JavaScript:

- `index-XXXXX.js` (bundle modern)
- `polyfills-legacy-XXXXX.js`, `index-legacy-XXXXX.js` (bundle legacy)

## Menguji Kompatibilitas Browser

### 1. Preview Local

```bash
npm run preview
```

### 2. Tools Pengujian Online

- **BrowserStack** - Testing di berbagai browser dan device
- **Sauce Labs** - Platform testing otomatis
- **CrossBrowserTesting** - Testing kompatibilitas

### 3. Developer Tools

- Chrome/Firefox: Simulasi device dan browser lama
- Meskipun tidak sempurna, membantu debugging awal

## Konfigurasi Browser Targets Lainnya

### Target Spesifik

```typescript
legacy({
  targets: [
    "last 2 versions",
    "> 1%",
    "Firefox ESR",
    "android >= 4.4",
    "ios >= 10",
  ],
});
```

### Custom Polyfills

```typescript
legacy({
  targets: ["defaults", "not IE 11"],
  polyfills: ["es.promise", "es.array.iterator"],
  modernPolyfills: ["es.promise.finally"],
});
```

## Dampak pada Build

**Sebelum Legacy Plugin:**

```
dist/
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ index-abc123.js    (50 KB)
â”‚   â””â”€â”€ index-def456.css   (10 KB)
```

**Setelah Legacy Plugin:**

```
dist/
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ index-abc123.js        (45 KB)    # Modern bundle
â”‚   â”œâ”€â”€ index-legacy-ghi789.js (65 KB)    # Legacy bundle
â”‚   â”œâ”€â”€ polyfills-legacy-jkl012.js (15 KB) # Polyfills
â”‚   â””â”€â”€ index-def456.css       (10 KB)
```

**Trade-off:**

- âœ… Kompatibilitas browser lebih luas
- âŒ Ukuran bundle lebih besar
- âŒ Waktu build sedikit lebih lama

## Best Practices

### 1. Analisis Pengguna

```javascript
// Gunakan analytics untuk melihat browser pengguna
// Fokus pada browser yang benar-benar digunakan
targets: ["> 0.5%", "last 2 versions", "not dead"];
```

### 2. Progressive Enhancement

```html
<!-- Berikan fallback untuk fitur modern -->
<noscript>
  <p>Please enable JavaScript for full functionality.</p>
</noscript>
```

### 3. Testing Strategy

```bash
# Testing di browser yang didukung
npm run build && npm run preview
# Buka di berbagai browser untuk testing manual
```

### 4. Monitor Bundle Size

```typescript
// Gunakan plugin visualizer untuk memantau ukuran
import { visualizer } from "rollup-plugin-visualizer";

plugins: [
  legacy({
    /* config */
  }),
  visualizer({ filename: "bundle-analysis.html" }),
];
```

## Contoh Konfigurasi Lengkap

```typescript
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import legacy from "@vitejs/plugin-legacy";
import { visualizer } from "rollup-plugin-visualizer";

export default defineConfig({
  plugins: [
    react(),
    legacy({
      targets: [
        "last 2 versions",
        "> 1%",
        "Firefox ESR",
        "not IE 11",
        "not dead",
      ],
      modernPolyfills: ["es.array.at", "es.string.replace-all"],
    }),
    visualizer({
      filename: "dist/bundle-analysis.html",
      open: true,
    }),
  ],
  build: {
    target: "es2015",
    outDir: "dist",
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ["react", "react-dom"],
          utils: ["lodash", "date-fns"],
        },
      },
    },
  },
});
```

## Ringkasan

Dengan `@vitejs/plugin-legacy`, Anda dapat:

- Mendukung browser lama dengan transpilasi dan polyfills
- Menghasilkan bundle ganda (modern + legacy)
- Menentukan target browser spesifik
- Mempertahankan performa untuk browser modern

**Pertimbangan:**

- Gunakan hanya jika diperlukan berdasarkan analytics pengguna
- Monitor ukuran bundle dan performance impact
- Test thoroughly di berbagai browser target

Dengan pendekatan ini, aplikasi Vite Anda dapat menjangkau audiens yang lebih luas tanpa mengorbankan pengalaman pengguna di browser modern.

# Ringkasan Kursus Vite

Selamat! Anda telah menyelesaikan panduan komprehensif Vite. Berikut rangkuman yang telah dipelajari:

### ðŸ“š Sesi 1-7: Perjalanan Lengkap Vite

1. **Membangun Aplikasi React dengan Vite** - Memulai proyek React baru dengan cepat
2. **Pengalaman Pengembangan Cepat** - Hot Module Replacement (HMR) untuk pembaruan instan
3. **Menangani Aset Statis** - Optimasi aset (`src/assets`) vs salin langsung (`public/`)
4. **Variabel Lingkungan** - Kelola konfigurasi berbeda untuk dev/prod dengan `.env`
5. **TypeScript dengan Vite** - Integrasi mudah untuk kode yang lebih robust
6. **Build untuk Produksi** - Optimasi otomatis untuk bundle kecil dan cepat
7. **Konfigurasi dan Plugin** - Kustomisasi melalui `vite.config.ts` dan ekosistem plugin

### ðŸ“š Sesi 8-9: Materi Vite Tambahan

1. **Multi-Page Applications (MPA) dengan Vite** - Menangani Multi-Page Applications (MPA) dengan beberapa file HTML sebagai entry point.
2. **Kompatibilitas Browser Lama** -

### ðŸš€ Keahlian yang Dikuasai

- âœ… Setup proyek React + Vite dari nol
- âœ… Development server dengan HMR
- âœ… Management aset statis dan optimasi
- âœ… Environment variables untuk multi-environment
- âœ… Integrasi TypeScript
- âœ… Production build dan preview
- âœ… Kustomisasi konfigurasi dan penggunaan plugin
- âœ… Path aliases untuk clean code

Anda sekarang memiliki fondasi kuat untuk membangun aplikasi web modern dengan Vite! Alat ini akan mempercepat workflow pengembangan secara signifikan.
